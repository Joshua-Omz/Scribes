# Scribes Backend - Production Environment Configuration
# Last Updated: December 18, 2024

# ========================================
# APPLICATION SETTINGS
# ========================================
APP_NAME=Scribes
APP_VERSION=0.1.0
APP_ENV=production
DEBUG=false

# ========================================
# DATABASE CONFIGURATION
# ========================================
# PostgreSQL with pgvector
# IMPORTANT: Replace with your production database credentials
DATABASE_URL=postgresql+asyncpg://postgres:CHANGE_ME_SECURE_PASSWORD@db-host:5432/scribes_production

# ========================================
# REDIS CONFIGURATION
# ========================================
# For rate limiting and caching
# IMPORTANT: Replace with your production Redis credentials
REDIS_URL=redis://:CHANGE_ME_REDIS_PASSWORD@redis-host:6379
REDIS_HOST=redis-host.production.com
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_MAX_CONNECTIONS=50

# ========================================
# RATE LIMITING (STRICT PRODUCTION LIMITS)
# ========================================
RATE_LIMITING_ENABLED=true
RATE_LIMIT_PER_MINUTE=10
RATE_LIMIT_PER_HOUR=100
RATE_LIMIT_PER_DAY=500
GLOBAL_CONCURRENT_LIMIT=100
GLOBAL_HOURLY_LIMIT=1000

# Cost Limits
USER_DAILY_COST_LIMIT=5.0
GLOBAL_DAILY_COST_LIMIT=100.0

# ========================================
# SECURITY
# ========================================

# JWT Configuration
# IMPORTANT: Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=CHANGE_ME_LONG_RANDOM_SECRET_KEY_MIN_32_CHARS
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# CORS (Adjust for your frontend domain)
# IMPORTANT: Replace with your actual frontend URLs
CORS_ORIGINS=https://app.scribesapp.com,https://www.scribesapp.com

# ========================================
# EMAIL CONFIGURATION
# ========================================
# IMPORTANT: Configure with your SMTP provider (SendGrid, AWS SES, etc.)
SMTP_HOST=smtp.sendgrid.net
SMTP_PORT=587
SMTP_USER=apikey
SMTP_PASSWORD=CHANGE_ME_SENDGRID_API_KEY
SMTP_FROM_EMAIL=noreply@scribesapp.com
SMTP_FROM_NAME=Scribes

# ========================================
# AI SERVICES
# ========================================

# HuggingFace API
# IMPORTANT: Add your HuggingFace API key
HUGGINGFACE_API_KEY=CHANGE_ME_YOUR_HUGGINGFACE_API_KEY

# HuggingFace Models
HF_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
HF_GENERATION_MODEL=meta-llama/Llama-3.2-3B-Instruct
HF_USE_API=true
HF_API_MODE=chat
HF_GENERATION_TEMPERATURE=0.2
HF_GENERATION_TIMEOUT=30

# ========================================
# AI ASSISTANT CONFIGURATION
# ========================================

# Token Budgets
ASSISTANT_MODEL_TOP_P=0.9
ASSISTANT_MODEL_REPITION_PENALTY=1.1
ASSISTANT_MODEL_TEMPERATURE=0.2
ASSISTANT_MODEL_CONTEXT_WINDOW=2048
ASSISTANT_TOP_K=50
ASSISTANT_MAX_CONTEXT_TOKENS=1200
ASSISTANT_SYSTEM_TOKENS=150
ASSISTANT_USER_QUERY_TOKENS=150
ASSISTANT_MAX_OUTPUT_TOKENS=400
ASSISTANT_EMBEDDING_DIM=384
ASSISTANT_CHUNK_SIZE=384
ASSISTANT_CHUNK_OVERLAP=64

# ========================================
# PAGINATION
# ========================================
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# ========================================
# BACKGROUND TASKS
# ========================================
ARQ_JOB_TIMEOUT=3600
ARQ_MAX_JOBS=10
ARQ_KEEP_RESULT=3600

# ========================================
# PRODUCTION FEATURES (Future Phases)
# ========================================

# Caching (Phase 2 - Coming Soon)
CACHE_ENABLED=false
CACHE_TTL_QUERY=86400
CACHE_TTL_EMBEDDING=604800
CACHE_TTL_CONTEXT=3600

# Metrics (Phase 3 - Coming Soon)
METRICS_ENABLED=false

# Circuit Breakers (Phase 4 - Coming Soon)
CIRCUIT_BREAKER_ENABLED=false

# Tracing (Phase 6 - Coming Soon)
TRACING_ENABLED=false
